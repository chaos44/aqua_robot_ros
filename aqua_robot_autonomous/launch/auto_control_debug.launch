<launch>
  <arg name="raspberry_pi3_address" default="192.168.1.2"/>

  <machine name="master_pc" address="192.168.1.1" env-loader="$(find aqua_robot_manual_controller)/launch/env-loader/master_pc_set_env.sh" default="true"/>
  <machine name="raspberry_pi3" address="$(arg raspberry_pi3_address)" env-loader="/home/tut/ros_remote_env_loader.sh" default="never" user="tut"/>

  <node name="arduino" pkg="rosserial_python" type="serial_node.py" args="/dev/ttyACM0" machine="raspberry_pi3"/>
  <node name="raspi_camera" pkg="raspicam_node" type="raspicam_raw_node" machine="raspberry_pi3">
    <param name="camera_info_url" value="package://raspicam_node/camera_info/camerav2_1280x960.yaml"/>
    <param name="width" value="1280"/>
    <param name="height" value="960"/>
    <param name="framerate" value="10"/>
    <param name="camera_frame_id" value="raspicam"/>
  </node>
  <node name="usb_camera" pkg="usb_cam" type="usb_cam_node" machine="raspberry_pi3">
    <param name="video_device" value="/dev/video1"/>
    <param name="framerate" value="10"/>
  </node>
  <node name="line_trace" pkg="aqua_robot_line_trace" type="aqua_robot_line_trace_node">
    <remap from="image" to="usb_camera/image_raw"/>
  </node>
  <node name="auto_control" pkg="aqua_robot_autonomous" type="aqua_robot_autonomous_node">
    <remap from="motor_velocity" to="set_motor_velocity"/>
  </node>
</launch>
